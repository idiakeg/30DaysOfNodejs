<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="stylesheet" href="style.css" />
		<title>Document</title>
	</head>
	<body>
		<div class="container">
			<p>Add your quotes in real time.</p>
			<textarea name="quotes" id="quotes" cols="30" rows="5"></textarea>
			<button id="btn">Add quote</button>
			<p class="error"></p>
		</div>
		<script>
			// the ws connection
			const ws = new WebSocket("ws://localhost:6969");
			ws.onopen = () => {
				console.log("New client has connected");
			};

			const txtArea = document.getElementById("quotes");
			const btn = document.getElementById("btn");
			const error = document.querySelector(".error");
			btn.addEventListener("click", () => {
				const quote = txtArea.value;
				if (quote === "") {
					error.textContent = "Sorry, cannot send empty quote";
					setTimeout(() => {
						error.textContent = "";
					}, 3000);
					return;
				} else if (ws.readyState === 1) {
					ws.send(quote);
					txtArea.value = "";
				} else {
					console.log("cannot send message at this time");
				}
			});
		</script>
	</body>
</html>
